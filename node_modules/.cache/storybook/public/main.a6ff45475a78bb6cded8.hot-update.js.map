{"version":3,"file":"main.a6ff45475a78bb6cded8.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAUA;AAEA;AAEA;AAEA;AAEA;;AA0DA;AACA;AACA;AACA;AA0BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AAAA;AAAA;AAAA;;AACA;AAAA;AAAA;AAAA;;AAIA;AACA;AACA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AACA;AAFA;AAMA;AACA;AACA;AACA;AAJA;AAOA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAaA;AAGA;AACA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;AA0BA;AACA;AACA;AACA;AACA;AAAA;;AAJA;AAOA","sources":["webpack://@zendeskgarden/react-components/./packages/colorpickers/src/elements/ColorpickerDialog/index.tsx"],"sourcesContent":["/**\r\n * Copyright Zendesk, Inc.\r\n *\r\n * Use of this source code is governed under the Apache License, Version 2.0\r\n * found at http://www.apache.org/licenses/LICENSE-2.0.\r\n */\r\n\r\nimport React, {\r\n  useState,\r\n  useRef,\r\n  useEffect,\r\n  Children,\r\n  cloneElement,\r\n  forwardRef,\r\n  ReactElement,\r\n  HTMLAttributes\r\n} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Modifier } from 'react-popper';\r\nimport { Button } from '@zendeskgarden/react-buttons';\r\nimport { GARDEN_PLACEMENT } from '@zendeskgarden/react-modals';\r\nimport { composeEventHandlers } from '@zendeskgarden/container-utilities';\r\nimport Chevron from '@zendeskgarden/svg-icons/src/16/chevron-down-stroke.svg';\r\nimport { Colorpicker, IColorpickerProps } from '../Colorpicker';\r\nimport { IColor } from '../../utils/types';\r\nimport {\r\n  StyledButton,\r\n  StyledButtonPreview,\r\n  StyledTooltipModal,\r\n  StyledTooltipBody\r\n} from '../../styled';\r\n\r\ninterface IDialogChanges {\r\n  isOpen?: boolean;\r\n}\r\n\r\nexport interface IColorpickerDialogProps extends IColorpickerProps {\r\n  /**\r\n   * Handles close actions. Can be triggered from the backdrop.\r\n   *\r\n   * @param {Object} color A color picker state\r\n   */\r\n  onClose?: (color: IColor) => void;\r\n  /** Adjusts the placement of the color dialog */\r\n  placement?: GARDEN_PLACEMENT;\r\n  /** Disables the color dialog button */\r\n  disabled?: boolean;\r\n  /**\r\n   * Modifies [Popper instance](https://popper.js.org/docs/v2/modifiers/) to customize positioning logic\r\n   */\r\n  popperModifiers?: Partial<Modifier<any, any>>[];\r\n  /**\r\n   * Sets the `z-index` of the color dialog\r\n   */\r\n  zIndex?: number;\r\n  /**\r\n   * Adds an arrow to the color dialog\r\n   */\r\n  hasArrow?: boolean;\r\n  /**\r\n   * Animates the color dialog\r\n   */\r\n  isAnimated?: boolean;\r\n  /**\r\n   * Opens the dialog in a controlled color picker dialog\r\n   */\r\n  isOpen?: boolean;\r\n  /**\r\n   * Applies inset `box-shadow` styling on focus\r\n   */\r\n  focusInset?: boolean;\r\n  /**\r\n   * Passes HTML attributes to the color dialog button element\r\n   */\r\n  buttonProps?: HTMLAttributes<HTMLButtonElement>;\r\n  /**\r\n   * Handles dialog changes\r\n   *\r\n   * @param {Object} changes The changed dialog state\r\n   */\r\n  onDialogChange?: (changes: IDialogChanges) => void;\r\n}\r\n\r\n/**\r\n * @extends HTMLAttributes<HTMLDivElement>\r\n */\r\nexport const ColorpickerDialog = forwardRef<\r\n  HTMLDivElement,\r\n  IColorpickerDialogProps & Omit<HTMLAttributes<HTMLDivElement>, 'color' | 'onChange'>\r\n>(\r\n  (\r\n    {\r\n      color,\r\n      defaultColor,\r\n      placement,\r\n      onChange,\r\n      onClose,\r\n      labels,\r\n      hasArrow,\r\n      isAnimated,\r\n      isOpaque,\r\n      isOpen,\r\n      popperModifiers,\r\n      zIndex,\r\n      focusInset,\r\n      disabled,\r\n      buttonProps,\r\n      onDialogChange,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const isControlled = color !== null && color !== undefined;\r\n    const isDialogControlled = isOpen !== undefined && isOpen !== null;\r\n    const buttonRef = useRef<HTMLButtonElement>(null);\r\n    const colorPickerRef = useRef<HTMLDivElement>(null);\r\n    const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>();\r\n    const [uncontrolledColor, setUncontrolledColor] = useState<string | IColor | undefined>(\r\n      defaultColor\r\n    );\r\n\r\n    const openDialog = () => {\r\n      setReferenceElement(buttonRef.current);\r\n      onDialogChange && onDialogChange({ isOpen: true });\r\n    };\r\n\r\n    const closeDialog = () => {\r\n      setReferenceElement(null);\r\n      onDialogChange && onDialogChange({ isOpen: false });\r\n    };\r\n\r\n    const onClick = composeEventHandlers(props.onClick, () => {\r\n      if (referenceElement) {\r\n        closeDialog();\r\n      } else {\r\n        openDialog();\r\n      }\r\n    });\r\n\r\n    useEffect(() => {\r\n      if (isDialogControlled) {\r\n        if (isOpen) {\r\n          setReferenceElement(buttonRef.current);\r\n        } else {\r\n          setReferenceElement(null);\r\n        }\r\n      }\r\n    }, [isOpen, isDialogControlled]);\r\n\r\n    return (\r\n      <>\r\n        {children ? (\r\n          cloneElement(Children.only(children as ReactElement), {\r\n            onClick,\r\n            ref: buttonRef\r\n          })\r\n        ) : (\r\n          <StyledButton\r\n            disabled={disabled}\r\n            focusInset={focusInset}\r\n            ref={buttonRef}\r\n            onClick={onClick}\r\n            {...buttonProps}\r\n          >\r\n            <StyledButtonPreview backgroundColor={isControlled ? color : uncontrolledColor} />\r\n            {/* eslint-disable-next-line no-eq-null, eqeqeq */}\r\n            <Button.EndIcon isRotated={referenceElement != null}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" focusable=\"false\" viewBox=\"0 0 16 16\">\r\n  <path fill=\"currentColor\" d=\"M12.688 5.61a.5.5 0 01.69.718l-.066.062-5 4a.5.5 0 01-.542.054l-.082-.054-5-4a.5.5 0 01.55-.83l.074.05L8 9.359l4.688-3.75z\"/>\r\n</svg>\r\n            </Button.EndIcon>\r\n          </StyledButton>\r\n        )}\r\n        <StyledTooltipModal\r\n          ref={ref}\r\n          hasArrow={hasArrow}\r\n          popperModifiers={popperModifiers}\r\n          zIndex={zIndex}\r\n          isAnimated={isAnimated}\r\n          isOpaque={isOpaque}\r\n          focusOnMount={false}\r\n          placement={placement}\r\n          referenceElement={referenceElement}\r\n          onClose={() => {\r\n            closeDialog();\r\n            onClose && onClose(isControlled ? (color as IColor) : (uncontrolledColor as IColor));\r\n          }}\r\n          {...props}\r\n        >\r\n          <StyledTooltipBody>\r\n            <Colorpicker\r\n              autofocus\r\n              color={color}\r\n              isOpaque={isOpaque}\r\n              labels={labels}\r\n              ref={colorPickerRef}\r\n              defaultColor={uncontrolledColor}\r\n              onChange={isControlled ? onChange : setUncontrolledColor}\r\n            />\r\n          </StyledTooltipBody>\r\n        </StyledTooltipModal>\r\n      </>\r\n    );\r\n  }\r\n);\r\n\r\nColorpickerDialog.propTypes = {\r\n  placement: PropTypes.oneOf([\r\n    'auto',\r\n    'top',\r\n    'top-start',\r\n    'top-end',\r\n    'end',\r\n    'end-top',\r\n    'end-bottom',\r\n    'bottom',\r\n    'bottom-start',\r\n    'bottom-end',\r\n    'start',\r\n    'start-top',\r\n    'start-bottom'\r\n  ]),\r\n  onClose: PropTypes.func,\r\n  onChange: PropTypes.func,\r\n  onDialogChange: PropTypes.func,\r\n  disabled: PropTypes.bool,\r\n  labels: PropTypes.object,\r\n  color: PropTypes.oneOfType<any>([PropTypes.object, PropTypes.string]),\r\n  defaultColor: PropTypes.oneOfType<any>([PropTypes.object, PropTypes.string]),\r\n  buttonProps: PropTypes.object\r\n};\r\n\r\nColorpickerDialog.defaultProps = {\r\n  placement: 'bottom-start',\r\n  isAnimated: true,\r\n  zIndex: 1000,\r\n  hasArrow: false /* TooltipModal override */\r\n};\r\n\r\nColorpickerDialog.displayName = 'ColorpickerDialog';\r\n"],"names":[],"sourceRoot":""}